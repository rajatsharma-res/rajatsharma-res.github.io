<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rajat Sharma | Doctoral Researcher (PhD)</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: rgba(240, 242, 245, 0.9);
      --surface: #e8ecef;
      --primary: #2a4066;
      --secondary: #008080;
      --accent: #d4a017;
      --text: #1a1c20;
      --shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    body {
      background-color: var(--bg);
      background-image: url('https://www.transparenttextures.com/patterns/inspiration-geometry.png');
      animation: subtleBackgroundMove 60s linear infinite;
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }
    @keyframes subtleBackgroundMove { 0%{background-position:0 0} 100%{background-position:100% 100%} }
    @keyframes clickPulse { 0%{transform:scale(1)} 50%{transform:scale(.95)} 100%{transform:scale(1)} }
    .click-animate{animation:clickPulse .3s ease}

    .surface-element { background-color: var(--surface); box-shadow: inset 0 2px 10px rgba(0,0,0,.05); position: relative; }
    .surface-element::after { content:''; position:absolute; inset:0; background:url('https://www.transparenttextures.com/patterns/natural-paper.png'); opacity:.1; pointer-events:none; }

    * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif; }
    .container { max-width:1200px; margin:0 auto; padding:2rem; }

    .header { display:flex; justify-content:space-between; align-items:center; padding:2rem 0; position:sticky; top:0; background:var(--bg); z-index:1000; }
    .nav { display:flex; gap:2rem; }
    .nav a { color:var(--text); text-decoration:none; position:relative; padding:.5rem 0; transition:var(--transition); }
    .nav a::after{content:'';position:absolute;width:0;height:2px;bottom:0;left:0;background:var(--primary);transition:var(--transition)}
    .nav a:hover::after{width:100%}

    .hero { display:flex; justify-content:space-between; align-items:center; padding:6rem 5%; position:relative; overflow:hidden; background:linear-gradient(135deg,rgba(72,61,139,.2),rgba(0,206,158,.2)); background-size:200% 200%; animation: gradientBackground 15s ease-in-out infinite alternate; border-radius:16px; }
    @keyframes gradientBackground { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
    .hero-content{max-width:600px}
    .hero h1{font-size:3.5rem;margin-bottom:1rem;color:var(--primary)}
    .hero h2{font-size:3.5rem;margin-bottom:1rem;color:var(--primary)}
    .hero p{font-size:1.2rem;color:var(--text);margin-bottom:2rem;}
    .intro-small { position: relative; padding-left: 0; margin-bottom: 1rem; }
    .hero button{background:var(--primary);border:none;color:#fff;padding:.75rem 1.75rem;border-radius:4px;cursor:pointer;transition:var(--transition);font-weight:500;text-transform:uppercase;letter-spacing:.05em;box-shadow:0 2px 4px rgba(0,0,0,.1);position:relative;overflow:hidden}
    .hero button::before{content:'';position:absolute;top:50%;left:50%;width:0;height:0;background:rgba(255,255,255,.3);border-radius:50%;transform:translate(-50%,-50%);opacity:0;transition:width .6s ease,height .6s ease,opacity .6s ease}
    .hero button:hover::before{width:300px;height:300px;opacity:1;animation:rippleWave 1s ease-out}
    .hero button:hover{background:var(--secondary);transform:scale(1.02);box-shadow:0 4px 8px rgba(95,0,0,.15)}
    .hero button:active{transform:scale(.98)}
    @keyframes rippleWave{0%{transform:translate(-50%,-50%) scale(0);opacity:1}100%{transform:translate(-50%,-50%) scale(2);opacity:0}}
    .profile-container{position:relative}
    .profile-img{width:300px;height:300px;border-radius:50%;object-fit:cover;box-shadow:var(--shadow);max-width:100%;transition:var(--transition)}
    .profile-container:hover .profile-img{transform:scale(1.05);filter:brightness(1.1)}
    .social-circle{position:absolute;width:50px;height:50px;border-radius:50%;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;opacity:0;transform:scale(0);transition:var(--transition);font-size:30px;z-index:30;text-decoration:none}
    .social-circle:hover{transform:scale(1.2)!important}
    .instagram{color:#000;top:-20%;left:40%}
    .linkedin{color:#000;bottom:-10%;right:100%}
    .profile-container:hover .social-circle{opacity:1;transform:scale(1)}
    .research-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem;margin:4rem 0}
    .research-card{background:var(--surface);padding:2rem;border-radius:10px;box-shadow:var(--shadow);transition:var(--transition);text-align:center;cursor:pointer}
    .research-card i{font-size:2rem;color:var(--primary);margin-bottom:1rem}
    .research-card h3{color:var(--primary);margin-bottom:1rem}
    .research-card:hover{transform:translateY(-5px) scale(1.02);box-shadow:0 20px 50px rgba(0,0,0,.15)}

    .publication-list{list-style:none}
    .publication-item{background:var(--surface);padding:2rem;border-radius:10px;box-shadow:var(--shadow);margin-bottom:1.5rem;transition:opacity .3s ease,transform .3s ease,background .3s ease}
    .publication-item:hover{transform:translateY(-5px);box-shadow:0 15px 40px rgba(0,0,0,.2);background:linear-gradient(135deg,#f8f9fa,#e8ecef)}
    .publication-item h4{color:var(--primary);margin-bottom:1rem}
    .publication-item a{text-decoration:none;color:var(--primary);font-weight:bold}
    .publication-item:hover a{color:var(--secondary)}

    .footer{display:flex;justify-content:space-between;align-items:center;padding:4rem 0;border-top:1px solid var(--primary)}
    .footer button{background:var(--primary);border:none;color:#fff;padding:.8rem 2rem;border-radius:5px;cursor:pointer;transition:var(--transition)}
    .footer button:hover{background:var(--secondary)}
    .menu-toggle{display:none;background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text)}

    @media (max-width:768px){
      .container{padding:1rem}
      .hero{flex-direction:column;text-align:center;padding:4rem 1rem}
      .hero-content{max-width:100%;margin-bottom:2rem}
      .profile-img{width:200px;height:200px;margin-top:2rem}
      .menu-toggle{display:block}
      .nav{display:none;flex-direction:column;position:absolute;top:100%;left:0;width:100%;background:var(--bg);padding:1rem;box-shadow:var(--shadow);z-index:999}
      .nav.active{display:flex}
      .nav a{padding:1rem;border-bottom:1px solid var(--primary);text-align:center}
      .research-grid{grid-template-columns:1fr;gap:1.5rem}
      .publication-item{padding:1rem}
      .footer{flex-direction:column;text-align:center;padding:2rem 0}
      .footer button{margin-top:1rem}
    }
    @media (max-width:480px){ .profile-img{width:150px;height:150px} }

    /* Loader */
    #loader{position:fixed;inset:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;opacity:1;transition:opacity .5s ease}
    #loader.hidden{opacity:0;pointer-events:none}
    .loader-spinner{font-size:4rem;color:var(--primary);animation:spin 1s linear infinite,pulse 1.5s ease-in-out infinite}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    @keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.2)}}
    .loader-text{margin-top:1rem;font-size:1.2rem;color:var(--text);font-weight:500}

    /* ===== Co-Author Network (enhanced layout) ===== */
    .coauthor-wrap{background:linear-gradient(180deg,rgba(255,255,255,.9),rgba(232,236,239,.8));border-radius:16px;box-shadow:var(--shadow);padding:1.5rem;margin:3rem 0;position:relative}
    .coauthor-header{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:.75rem}
    .coauthor-title{font-size:1.6rem;font-weight:700;color:var(--primary);margin:0}
    .coauthor-legend{display:flex;flex-wrap:wrap;gap:.5rem .75rem;align-items:center;font-size:.9rem}
    .coauthor-legend span.badge{display:inline-flex;align-items:center;gap:.4rem;background:#fff;border:1px solid #e2e8f0;padding:.25rem .55rem;border-radius:999px}
    .badge .dot{width:.8rem;height:.8rem;border-radius:999px;display:inline-block}

    .coauthor-layout{display:grid;grid-template-columns:1fr 280px;gap:1rem;align-items:stretch}
    @media(max-width:900px){.coauthor-layout{grid-template-columns:1fr}}
    #coauthor-graph{width:100%;height:560px;border-radius:12px;background:radial-gradient(ellipse at top,rgba(255,255,255,.85),rgba(245,247,250,.85));overflow:hidden;position:relative}

    .coauthor-side{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:1rem;box-shadow:0 8px 20px rgba(0,0,0,.04)}
    .side-title{font-size:1rem;margin:0 0 .5rem;color:#334155;font-weight:700}
    .paper-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.4rem}
    .paper-list li{border:1px solid #e2e8f0;border-radius:10px;padding:.5rem .6rem;display:flex;flex-direction:column;gap:.25rem;background:#fafbfc;cursor:pointer;transition:transform .18s ease, box-shadow .18s ease, background .18s ease}
    .paper-list li:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.06);background:#fff}
    .paper-list li.active{outline:2px solid var(--accent);background:#fffef7}
    .paper-title{font-weight:600;font-size:.92rem;color:#0f172a}
    .paper-meta{font-size:.8rem;color:#475569}
    .legend-caption{font-size:.85rem;color:#6b7280;margin:.5rem 0 0}

    .node-label{font:12px 'Inter',sans-serif;fill:#243b53;pointer-events:none;user-select:none}
    .ca-tooltip{position:absolute;pointer-events:none;z-index:50;background:#111827;color:#fff;font-size:.85rem;line-height:1.25;padding:.45rem .6rem;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,.2);transform:translate(-50%, calc(-100% - 12px));opacity:0;transition:opacity .2s ease}
    .ca-tooltip::after{content:'';position:absolute;left:50%;bottom:-6px;transform:translateX(-50%);width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #111827}
    .theme-hull{fill-opacity:.15;stroke-width:2.5;stroke-opacity:.4;transition:fill-opacity 0.4s ease, stroke-opacity 0.4s ease}
    .theme-hull:hover{fill-opacity:.25;stroke-opacity:.6}
    .edge{stroke-linecap:round;transition:stroke 0.3s ease, stroke-width 0.3s ease, opacity 0.3s ease}
    .node{transition:fill 0.3s ease, r 0.3s ease, opacity 0.3s ease; cursor: pointer}
    .node:hover{filter: drop-shadow(0 0 5px rgba(0,0,0,0.3))}
    .hull-highlight{fill-opacity:.3 !important; stroke-opacity:.8 !important; stroke-width:3 !important; animation: pulseHull 2s ease-in-out infinite}
    @keyframes pulseHull{0%,100%{fill-opacity:.15; stroke-opacity:.4} 50%{fill-opacity:.25; stroke-opacity:.6}}
    .edge-highlight{stroke: var(--accent) !important; opacity:1 !important}

    /* New styles for collapsible hero section */
    .collapsible-section { position: relative; margin-bottom: 2rem; }
    .trigger { cursor: pointer; height: 1.2rem; position: relative; display: flex; align-items: center; padding-left: 10px; }
    .trigger::before {
      content: "";
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 2px;
      height: 100%;
      background: #000;
    }
    .trigger-text {
      font-weight: bold;
      margin-right: 5px;
    }
    .blinking-arrow {
      position: relative;
      font-size: 1.2rem;
      cursor: pointer;
      transition: transform 0.3s ease;
      animation: blink 1s infinite;
    }
    @keyframes blink {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }
    .content {
      overflow: hidden;
      transition: max-height 0.5s ease;
      max-height: 0;
      position: relative;
      padding-left: 20px;
    }
    .content::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      width: 2px;
      height: 100%;
      background: #000;
    }
    .content-inner { margin: 0; }
    .collapsible-section.expanded .content { max-height: 500px; /* Adjust as needed */ }
    .collapsible-section.expanded .blinking-arrow {
      transform: rotate(90deg);
      animation: none;
    }
  </style>
</head>
<body>
  <!-- Loader -->
  <div id="loader">
    <i class="fas fa-atom loader-spinner"></i>
    <p class="loader-text">Exploring Research Horizons...</p>
  </div>

  <div class="container">
    <header class="header">
      <h1 style="font-size:25px">Rajat Sharma</h1>
      <button class="menu-toggle" aria-label="Toggle menu"><i class="fas fa-bars"></i></button>
      <nav class="nav">
        <a href="#research">Research</a>
        <a href="#publications">Publications</a>
        <a href="#coauthors">Co-authors</a>
        <a href="projects.html">Projects</a>
        <a href="#contact">Contact</a>
      </nav>
    </header>

    <section class="hero">
      <div class="hero-content">
        <h2 style="font-size:36px">Hey, I'm Rajat,</h2>
        <p class="intro-small" style="font-size:1.2rem;color:var(--text);">Have a good time!</p>
        <div class="collapsible-section">
          <div class="trigger">
            <span class="trigger-text">This is me</span><span class="blinking-arrow">▶</span>
          </div>
          <div class="content">
            <div class="content-inner">
              <h3 style="font-size:1.5rem; margin-bottom:0.5rem; color:var(--primary);">Doctoral Researcher (PhD)</h3>
              <p style="font-size:1.2rem;color:var(--text);margin-bottom:2rem;">
                Civil Engineering<br>
                <a href="https://clear-doc.univ-gustave-eiffel.fr/about/a-cofund-programme" target="_blank" style="text-decoration:none;color:inherit">Marie Skłodowska Curie - CLEARDoc Fellow</a><br>
                <a href="https://gie.univ-gustave-eiffel.fr/" target="_blank" style="text-decoration:none;color:inherit">GERS - (GIE) Geomaterials and Environmental Interaction</a><br>
                <a href="https://www.univ-gustave-eiffel.fr/" target="_blank" style="text-decoration:none;color:inherit">University Gustave Eiffel, France</a>
              </p>
            </div>
          </div>
        </div>
        <a href="https://scholar.google.com/citations?user=OKQOyz4AAAAJ&hl=en" target="_blank" class="hero-button" style="display:inline-block;background:var(--primary);border:none;color:#fff;padding:.75rem 1.75rem;border-radius:4px;cursor:pointer;transition:var(--transition);font-weight:500;text-transform:uppercase;letter-spacing:.05em;box-shadow:0 2px 4px rgba(0,0,0,.1);position:relative;overflow:hidden;text-decoration:none">Explore My Work</a>
      </div>
      <div class="profile-container">
  <img src="images/picme.jpeg" alt="Profile photo of Rajat Sharma" class="profile-img">
  <svg width="300" height="350" style="position:absolute; top:0; left:0;">
    <defs>
      <path id="curve" d="M 50 300 Q 150 350 250 300" fill="none" stroke="red" stroke-width="2" />
    </defs>
    <text font-size="16" fill="red" filter="url(#shadow)" stroke="black" stroke-width="2" stroke-opacity="0.3" paint-order="stroke fill">
      <defs>
        <filter id="shadow">
          <feDropShadow dx="0" dy="0" stdDeviation="2" flood-color="black" flood-opacity="0.5"/>
        </filter>
      </defs>
      <textPath href="#curve" startOffset="70%" text-anchor="middle">
        <tspan>
          Hover for Socials
          <animate attributeName="startOffset" 
                  values="70%;110%;70%" 
                  dur="4s" 
                  repeatCount="indefinite"/>
          <animate attributeName="fill" 
                  values="#E6E6FA;#D4F1F4;#E6E6FA" 
                  dur="2s" 
                  repeatCount="indefinite"/>
        </tspan>
      </textPath>
    </text>
  </svg>
  <a href="https://www.instagram.com/murphys_serendipity/" target="_blank" class="social-circle instagram"><i class="fab fa-instagram"></i></a>
  <a href="https://www.linkedin.com/in/rajat-sharma-89421718b/" target="_blank" class="social-circle linkedin"><i class="fab fa-linkedin"></i></a>
</div>
    </section>

    <!-- Your existing sections ... -->
    <section id="research" class="research-grid">
      <div class="research-card surface-element" data-category="low-cost-sensors">
        <i class="fas fa-atom"></i><h3>Low Cost Sensors</h3><p>Next-gen environmental monitoring systems</p>
      </div>
      <div class="research-card surface-element" data-category="aerosols-exposure">
        <i class="fas fa-wind"></i><h3>Aerosols and Exposure</h3><p>Particulate emissions and behavior in urban environments</p>
      </div>
      <div class="research-card surface-element" data-category="air-quality">
        <i class="fas fa-brain"></i><h3>Air Quality</h3><p>Monitoring and Modelling</p>
      </div>
    </section>

    <section id="publications">
      <h2>Publication List</h2>
      <button id="reset-filter" style="margin-top:20px;padding:10px 20px;background-color:var(--primary);color:#fff;border:none;border-radius:5px;cursor:pointer">Show All Publications</button>
      <ul class="publication-list">
        <li class="publication-item surface-element" data-category="air-quality">
          <h4>Analysis of seasonal and spatial distribution of particulate matters and gaseous pollutants around an open cast coal mining area of Odisha, India</h4>
          <p>Environmental Science and Pollution Research • 2023</p>
          <a href="https://link.springer.com/article/10.1007/s11356-022-25034-w" target="_blank">View Paper →</a>
        </li>
        <li class="publication-item surface-element" data-category="aerosols-exposure">
          <h4>Determinants of quantification of tourism waste in the hilly terrain of Himalayas: A spatial approach</h4>
          <p>Waste Management • 2023</p>
          <a href="https://www.sciencedirect.com/science/article/abs/pii/S0956053X23003306" target="_blank">View Paper →</a>
        </li>
        <li class="publication-item surface-element" data-category="low-cost-sensors">
          <h4>Spatial and temporal variation of cooking-emitted particles in distinct zones using scanning mobility particle sizer and a network of low-cost sensors</h4>
          <p>Indoor Environments • 2024</p>
          <a href="https://www.sciencedirect.com/science/article/pii/S2950362024000055" target="_blank">View Paper →</a>
        </li>
        <li class="publication-item surface-element" data-category="low-cost-sensors">
          <h4>Performance and Applicability of Low-Cost PM Sensors to assess Global Pollution Variability through Machine Learning Techniques</h4>
          <p>Atmospheric Environment: X • 2025</p>
          <a href="https://www.sciencedirect.com/science/article/pii/S2590162125000218?via%3Dihub" target="_blank">View Paper →</a>
        </li>
        <li class="publication-item surface-element" data-category="aerosols-exposure">
          <h4>Enumerating and Modelling the Seasonal alterations of Surface Urban Heat and Cool Island: A Case Study over Indian Cities</h4>
          <p>Urban Science • 2023</p>
          <a href="https://www.mdpi.com/2413-8851/7/2/38" target="_blank">View Paper →</a>
        </li>
      </ul>
    </section>

    <!-- ===== Enhanced Co-Author Network ===== -->
    <section id="coauthors" class="coauthor-wrap surface-element">
      <div class="coauthor-header">
        <h2 class="coauthor-title"><i class="fas fa-project-diagram"></i> Co-Author Network</h2>
        <div class="coauthor-legend" aria-hidden="true">
          <span class="badge"><span class="dot" style="background:#1d4ed8"></span> Rajat Sharma</span>
          <span class="badge"><span class="dot" style="background:#0f766e"></span> Low-Cost Sensors / Exposure</span>
          <span class="badge"><span class="dot" style="background:#7c3aed"></span> Air Quality / Mining</span>
          <span class="badge"><span class="dot" style="background:#ea580c"></span> Waste / Urban</span>
        </div>
      </div>

      <div class="coauthor-layout">
        <div id="coauthor-graph" role="img" aria-label="Force-directed graph of Rajat Sharma's co-author network"></div>
        <aside class="coauthor-side">
          <h3 class="side-title">Papers</h3>
          <ul id="paper-list" class="paper-list"><!-- filled by JS --></ul>
          <p class="legend-caption">Thicker lines = more shared papers. Hulls pulse on hover.</p>
          <p class="legend-caption">Hover a paper to highlight its authors. Click to lock. Drag nodes!</p>
        </aside>
      </div>

      <div id="ca-tip" class="ca-tooltip" aria-hidden="true"></div>
    </section>

    <footer class="footer" id="contact">
      <div>
        <h3>Connect</h3>
        <p>rajat.sharma@univ-eiffel.fr</p>
        <button>Download CV</button>
      </div>
      <div>
        <h3>Network</h3>
        <div style="display:flex;gap:1rem">
          <a href="https://scholar.google.com/citations?user=OKQOyz4AAAAJ&hl=en" target="_blank" style="text-decoration:none;color:inherit" title="Google Scholar" aria-label="Google Scholar profile"><i class="fas fa-graduation-cap" style="font-size:1.5rem"></i></a>
          <a href="https://www.linkedin.com/in/rajat-sharma-89421718b/" target="_blank" style="text-decoration:none;color:inherit" title="LinkedIn" aria-label="LinkedIn profile"><i class="fab fa-linkedin" style="font-size:1.5rem"></i></a>
        </div>
        <p>Nantes campus<br> Allée des ponts et haussées - CS 5004 <br> F-44344 Bouguenais Cedex • FRANCE<br> univ-gustave-eiffel.fr</p>
      </div>
    </footer>
  </div>

  <!-- D3 -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>

  <script>
    // Loader hide
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        const loader = document.getElementById('loader');
        loader.classList.add('hidden');
        setTimeout(() => loader.style.display = 'none', 500);
      }, 500);
    });

    // Mobile menu
    (function(){
      const menuToggle = document.querySelector('.menu-toggle');
      const nav = document.querySelector('.nav');
      if(menuToggle && nav){
        menuToggle.addEventListener('click', ()=>{
          nav.classList.toggle('active');
          const icon = menuToggle.querySelector('i');
          if (nav.classList.contains('active')) { icon.classList.replace('fa-bars','fa-times'); }
          else { icon.classList.replace('fa-times','fa-bars'); }
        });
      }
    })();

    // Publications filter (unchanged from your version)
    (function(){
      const researchCards = document.querySelectorAll('.research-card');
      const publicationItems = document.querySelectorAll('.publication-item');
      const resetButton = document.getElementById('reset-filter');
      const filterByCategory = (category) => {
        publicationItems.forEach(item => {
          const show = item.getAttribute('data-category') === category;
          item.style.display = show ? 'block' : 'none';
          item.style.opacity = show ? '1' : '0';
          item.style.transform = show ? 'translateY(0)' : 'translateY(20px)';
        });
      };
      publicationItems.forEach(item => { item.style.display='block'; item.style.opacity='1'; });
      researchCards.forEach(card => card.addEventListener('click', ()=> filterByCategory(card.getAttribute('data-category'))));
      resetButton.addEventListener('click', ()=> publicationItems.forEach(item => { item.style.display='block'; item.style.opacity='1'; item.style.transform='translateY(0)'; }));
    })();

    // Collapsible hero section
    (function(){
      const collapsibleSection = document.querySelector('.collapsible-section');
      if (collapsibleSection) {
        const trigger = collapsibleSection.querySelector('.trigger');
        const content = collapsibleSection.querySelector('.content');
        const arrow = collapsibleSection.querySelector('.blinking-arrow');
        trigger.addEventListener('click', () => {
          collapsibleSection.classList.toggle('expanded');
          if (collapsibleSection.classList.contains('expanded')) {
            content.style.maxHeight = content.scrollHeight + 'px';
          } else {
            content.style.maxHeight = '0px';
          }
        });
      }
    })();

    /* ===========================
       Enhanced Co-Author Network (D3.js)
       =========================== */
    const papers = [
      { id:"Article1", title:"Urban Science — SUH/Cool Island", url:"https://www.mdpi.com/2413-8851/7/2/38", theme:"waste-urban",
        authors:["Vinayak Bhanage","Sneha Kulkarni","Rajat Sharma","Han Soo Lee","Shirishkumar Gedam"] },
      { id:"Article2", title:"ESPR — Air quality near mining", url:"https://link.springer.com/article/10.1007/s11356-022-25034-w", theme:"air-mining",
        authors:["Rajat Sharma","Ashutosh Kumar"] },
      { id:"Article3", title:"Waste Management — Tourism waste (Himalayas)", url:"https://www.sciencedirect.com/science/article/abs/pii/S0956053X23003306", theme:"waste-urban",
        authors:["Rajat Sharma","Ashutosh Kumar"] },
      { id:"Article4", title:"Indoor Environments — Cooking particles & LCS", url:"https://www.sciencedirect.com/science/article/pii/S2950362024000055", theme:"lcs-exposure",
        authors:["Rubal Dhiman","Rajat Sharma","Akshat Jain","Anirudha Ambekar","Thaseem Thajudeen","Sarath K. Guttikunda"] },
      { id:"Article5", title:"Atmos. Environment: X — LCS & calibration", url:"https://www.sciencedirect.com/science/article/pii/S2590162125000218", theme:"lcs-exposure",
        authors:["Rajat Sharma","Andry Razakamanantsoa","Ashutosh Kumar","Thaseem Thajudeen","Agnès Jullien"] }
    ];
    const themeColor = { "lcs-exposure":"#0f766e", "air-mining":"#7c3aed", "waste-urban":"#ea580c" };

    // Build nodes
    const authorMap = new Map();
    papers.forEach(p => p.authors.forEach(a => {
      if(!authorMap.has(a)) authorMap.set(a,{ id:a, name:a, papers:new Set(), themePrimary:p.theme, size:8 });
      authorMap.get(a).papers.add(p.id);
    }));
    const nodes = Array.from(authorMap.values()).map(n => {
      if(n.name === "Rajat Sharma"){ n.isRajat = true; n.size = 18; }
      return n;
    });

    // Build links by shared papers
    const keyFor = (a,b)=> a<b ? `${a}|${b}` : `${b}|${a}`;
    const edgeMap = new Map();
    papers.forEach(p=>{
      for(let i=0;i<p.authors.length;i++){
        for(let j=i+1;j<p.authors.length;j++){
          const a=p.authors[i], b=p.authors[j], k=keyFor(a,b);
          if(!edgeMap.has(k)) edgeMap.set(k,{source:a,target:b,weight:0,papers:new Set()});
          const e=edgeMap.get(k); e.weight++; e.papers.add(p.id);
        }
      }
    });
    const links = Array.from(edgeMap.values());

    // Sidebar: render paper list
    const paperListEl = document.getElementById('paper-list');
    papers.forEach(p=>{
      const li = document.createElement('li');
      li.setAttribute('data-paper-id', p.id);
      li.innerHTML = `<span class="paper-title">${p.id}: ${p.title}</span>
                      <span class="paper-meta">${p.authors.join(', ')}</span>`;
      li.title = "Double-click to open paper";
      li.addEventListener('dblclick', ()=> window.open(p.url,'_blank'));
      paperListEl.appendChild(li);
    });

    (function initCoAuthorGraph(){
      const wrap = document.getElementById('coauthor-graph');
      const tip  = document.getElementById('ca-tip');
      const W = wrap.clientWidth, H = 560;
      const svg = d3.select(wrap).append('svg').attr('width',W).attr('height',H);
      const g = svg.append('g');
      svg.call(d3.zoom().scaleExtent([0.6,3]).on('zoom', ev => g.attr('transform', ev.transform)));

      const hullLayer = g.append('g'); // behind lines/nodes

      const maxW = d3.max(links, d=>d.weight) || 1;
      const linkWidth = d3.scaleLinear().domain([1,maxW]).range([1.5,7]);
      const linkColor = d3.scaleOrdinal().domain(['lcs-exposure','air-mining','waste-urban']).range(['#0f766e','#7c3aed','#ea580c']);

      const link = g.append('g')
        .attr('class','links')
        .selectAll('line').data(links).join('line')
        .attr('class','edge').attr('stroke-width', d=>linkWidth(d.weight))
        .style('stroke', d => {
          // Color by most common theme in shared papers
          const themes = [...d.papers].map(id => papers.find(p => p.id === id).theme);
          const themeCounts = themes.reduce((acc, t) => { acc[t] = (acc[t] || 0) + 1; return acc; }, {});
          const maxTheme = Object.keys(themeCounts).reduce((a, b) => themeCounts[a] > themeCounts[b] ? a : b);
          return linkColor(maxTheme) || '#94a3b8';
        })
        .attr('stroke-opacity',0.6);

      const nodeR = d3.scaleLinear().domain([6,20]).range([6,20]);
      const node = g.append('g').selectAll('circle').data(nodes).join('circle')
        .attr('class','node').attr('r', d=>nodeR(d.size))
        .attr('fill', d=> d.isRajat ? '#1d4ed8' : (themeColor[d.themePrimary]||'#0ea5e9'))
        .attr('stroke','#fff').attr('stroke-width',2.5)
        .on('mouseover', (ev,d)=> showTip(ev,d))
        .on('mousemove', ev=> moveTip(ev))
        .on('mouseout', hideTip)
        .on('click', (ev,d) => highlightAuthorCluster(d))
        .call(d3.drag().on('start',dragstarted).on('drag',dragged).on('end',dragended));

      const labels = g.append('g').selectAll('text').data(nodes).join('text')
        .attr('class','node-label').attr('text-anchor','middle')
        .attr('dy', d=> d.isRajat ? -18 : -12)
        .style('font-weight', d=> d.isRajat ? 800 : 500)
        .style('fill', d=> d.isRajat ? '#0f172a' : '#334155')
        .text(d=> d.name)
        .on('mouseover', (ev,d)=> showTip(ev,d))
        .on('mousemove', ev=> moveTip(ev))
        .on('mouseout', hideTip)
        .on('click', (ev,d) => highlightAuthorCluster(d));

      const sim = d3.forceSimulation(nodes)
        .force('link', d3.forceLink(links).id(d=>d.id).distance(d=>140 - (d.weight-1)*15).strength(.4))
        .force('charge', d3.forceManyBody().strength(-450))
        .force('center', d3.forceCenter(W/2, H/2))
        .force('collision', d3.forceCollide().radius(d => nodeR(d.size)+15))
        .alpha(1).alphaDecay(0.0228)
        .velocityDecay(0.6)
        .on('tick', ticked)
        .on('end', drawHulls);

      const center = {x:W/2,y:H/2};
      nodes.forEach(n=>{ if(n.isRajat){ n.fx=center.x; n.fy=center.y; } });

      function ticked(){
        link.attr('x1', d=>d.source.x).attr('y1', d=>d.source.y)
            .attr('x2', d=>d.target.x).attr('y2', d=>d.target.y);
        node.attr('cx', d=>d.x=Math.max(20, Math.min(W-20, d.x)))
            .attr('cy', d=>d.y=Math.max(20, Math.min(H-20, d.y)));
        labels.attr('x', d=>d.x).attr('y', d=>d.y - (d.isRajat ? nodeR(d.size)+8 : nodeR(d.size)+6));
        drawHulls();
      }

      // Enhanced Themed convex hulls with animations
      function drawHulls(){
        const groups = d3.groups(nodes.filter(n=>!n.isRajat), d=>d.themePrimary);
        const hulls = groups.map(([theme, arr])=>{
          const pts = arr.map(n=>[n.x,n.y]);
          const hull = d3.polygonHull(pts);
          return {theme, hull};
        }).filter(h=>h.hull);

        const hullSel = hullLayer.selectAll('path').data(hulls, d=>d.theme);
        hullSel.join(
          enter => enter.append('path')
            .attr('class','theme-hull')
            .attr('d', d => 'M'+d.hull.join('L')+'Z')
            .attr('fill', d => themeColor[d.theme] || '#94a3b8')
            .attr('stroke', d => themeColor[d.theme] || '#94a3b8')
            .on('mouseover', function(ev, d) { d3.select(this).classed('hull-highlight', true); })
            .on('mouseout', function(ev, d) { d3.select(this).classed('hull-highlight', false); }),
          update => update.transition().duration(500)
            .attr('d', d => 'M'+d.hull.join('L')+'Z')
        );
      }

      // Sidebar interactions
      const paperLis = document.querySelectorAll('#paper-list li');
      let lockedPaper = null;
      paperLis.forEach(li=>{
        const pid = li.getAttribute('data-paper-id');
        const authors = papers.find(p=>p.id===pid).authors;
        li.addEventListener('mouseenter', ()=> { if(!lockedPaper) highlightAuthors(authors, true); });
        li.addEventListener('mouseleave', ()=> { if(!lockedPaper) clearHighlight(); });
        li.addEventListener('click', ()=>{
          if(lockedPaper === pid){ lockedPaper = null; li.classList.remove('active'); clearHighlight(); }
          else {
            document.querySelectorAll('#paper-list li.active').forEach(el=>el.classList.remove('active'));
            lockedPaper = pid; li.classList.add('active'); highlightAuthors(authors, true);
          }
        });
      });

      // New: Highlight author and their cluster on node click
      function highlightAuthorCluster(author) {
        const authorPapers = papers.filter(p => p.authors.includes(author.name));
        const clusterAuthors = new Set();
        authorPapers.forEach(p => p.authors.forEach(a => clusterAuthors.add(a)));
        highlightAuthors(Array.from(clusterAuthors), true);
        // Pulse the central node
        node.filter(d => d.id === author.id).transition().duration(500).attr('r', nodeR(author.size) * 1.5).transition().attr('r', nodeR(author.size));
      }

      function highlightAuthors(authors, persist = false){
        const set = new Set(authors);
        node.transition().duration(300).attr('opacity', d => set.has(d.id)?1:0.1).attr('r', d => set.has(d.id) ? nodeR(d.size) * 1.2 : nodeR(d.size));
        labels.transition().duration(300).attr('opacity', d => set.has(d.id)?1:0.1);
        link.transition().duration(300).attr('opacity', d => (set.has(d.source.id) && set.has(d.target.id)) ? 1 : 0.05)
            .attr('stroke-width', d => (set.has(d.source.id) && set.has(d.target.id)) ? linkWidth(d.weight) * 1.5 : 0.5)
            .attr('class', d => (set.has(d.source.id) && set.has(d.target.id)) ? 'edge edge-highlight' : 'edge');
        // Highlight hulls for themes in the authors
        const themes = [...new Set(authors.filter(a => a !== 'Rajat Sharma').map(a => nodes.find(n => n.id === a).themePrimary))];
        hullLayer.selectAll('.theme-hull').transition().duration(300)
          .attr('opacity', d => themes.includes(d.theme) ? 1 : 0.1)
          .attr('class', d => themes.includes(d.theme) ? 'theme-hull hull-highlight' : 'theme-hull');
      }
      function clearHighlight(){
        node.transition().duration(300).attr('opacity',1).attr('r', d => nodeR(d.size));
        labels.transition().duration(300).attr('opacity',1);
        link.transition().duration(300).attr('opacity',0.6).attr('stroke-width', d=>linkWidth(d.weight)).attr('class', 'edge');
        hullLayer.selectAll('.theme-hull').transition().duration(300).attr('opacity',1).attr('class', 'theme-hull');
      }

      // Enhanced Tooltip
      function showTip(ev,d){
        const list = Array.from(d.papers).map(id => papers.find(p => p.id === id).title).join('<br>');
        tip.innerHTML = `<strong>${d.name}</strong><br>${d.isRajat?'Central author':'Co-author'}<br><em>Collaborations:</em><br>${list||'—'}`;
        tip.style.opacity=1; moveTip(ev);
      }
      function moveTip(ev){
        const rect = wrap.getBoundingClientRect();
        tip.style.left = (ev.clientX - rect.left) + 'px';
        tip.style.top  = (ev.clientY - rect.top - 10) + 'px';
      }
      function hideTip(){ tip.style.opacity=0; }

      function dragstarted(event,d){ if(!event.active) sim.alphaTarget(0.3).restart(); d.fx=d.x; d.fy=d.y; }
      function dragged(event,d){ d.fx=event.x; d.fy=event.y; }
      function dragended(event,d){ if(!event.active) sim.alphaTarget(0); if(d.isRajat){ d.fx=center.x; d.fy=center.y; } else { d.fx=null; d.fy=null; } }

      // Resize
      window.addEventListener('resize', ()=>{
        const w = wrap.clientWidth;
        svg.attr('width', w).attr('height', H);
        sim.force('center', d3.forceCenter(w/2, H/2)).alpha(0.25).restart();
      });

      // Initial fade-in animation
      link.transition().delay((d,i)=>i*10).attr('stroke-opacity',0.6);
      node.transition().delay((d,i)=>i*50).attr('r', d=>nodeR(d.size)).style('opacity',1);
      labels.transition().delay((d,i)=>i*50).style('opacity',1);
    })();
  </script>
</body>
</html>
